---
alwaysApply: true
---

# üßæ Product Requirements Document (PRD)

## üì± Product Name

**Turi**

---

## üß≠ Overview

**Turi** is a fun, lightweight app that helps groups (families, roommates, teams) manage **recurring shared tasks** ‚Äî like chores, cooking, or cleaning ‚Äî by showing **whose turn it is** in a friendly, Duolingo-style interface.

Version 1 (MVP) focuses on **local-only functionality** with **no accounts or cloud sync**, just fast and delightful task rotation.

---

## üéØ Goals

- Simplify managing shared, repetitive tasks.
- Make task tracking fun, visual, and easy to maintain.
- Encourage consistency through small gamified elements.

---

## üö´ Out of Scope (v1)

- User accounts / authentication.
- Cloud sync or real-time updates.
- Push notifications.
- Analytics / detailed reporting.

---

## üß© Core Features

### 1. **Groups**

- Create, view, edit, and delete groups.
- Each group has:

  - Name
  - Icon (Lucide icon)
  - Color theme (gradient start/end colors)
  - Member list
  - Task list

### 2. **Members**

- Add members by name (initials-based avatar with random color).
- Order defines task rotation sequence.
- Delete or edit member (swipe-to-reveal actions).
- Avatars display member initials with Microsoft Teams-style color palette.

### 3. **Tasks**

- Add tasks within a group.
- Each task has:

  - Task name
  - Icon (Lucide icon)
  - Frequency (daily / weekly / monthly)
  - Scheduling options (optional):
    - **For weekly tasks:** Day of week (Sun-Sat), Time (optional)
    - **For monthly tasks:** Week of month (1st-4th), Day of week (Sun-Sat), Time (optional)
    - **For daily tasks:** Time (optional)
  - Assigned members (rotation follows member list)
  - Completion history (tracking who completed when)

- "Mark Done" button rotates to the next member.
- Tasks can only be completed once per period (daily/weekly/monthly).
- Task cards display schedule information prominently.

### 4. **Rotation Logic**

- Tasks start with the first member in the group list.
- When ‚ÄúMark Done‚Äù is pressed:

  - Assigned index increases by 1.
  - If at the end, wraps to the first member.

Example:

```
Members = [Alice, Bob, Charlie]
Task: ‚ÄúWash Dishes‚Äù
CurrentTurn = Alice
‚Üí Mark Done ‚Üí NextTurn = Bob
‚Üí Mark Done ‚Üí NextTurn = Charlie
‚Üí Mark Done ‚Üí NextTurn = Alice
```

### 5. **Local Storage**

- All data stored using **AsyncStorage** (Expo).
- Data structure:

  ```ts
  Group {
    id: string;
    name: string;
    icon: string; // Lucide icon name
    colorStart: string; // Gradient start color
    colorEnd: string; // Gradient end color
    members: Member[];
    tasks: Task[];
  }

  Member {
    id: string;
    name: string;
    avatarColor: string; // Random color assigned for avatar
    streakCount: number;
    lastStreakDate: string | null; // ISO date string
  }

  TaskCompletion {
    memberId: string;
    completedAt: string; // ISO date string
    memberStreakAtTime: number; // Streak count when completed
  }

  Task {
    id: string;
    name: string;
    icon: string; // Lucide icon name
    frequency: 'daily' | 'weekly' | 'monthly';
    assignedIndex: number;
    memberIds: string[];
    lastCompletedAt: string | null; // ISO date string for streak calculation
    completionHistory: TaskCompletion[]; // History of completions
    // Scheduling options (optional, only used when frequency is weekly or monthly)
    scheduleWeek?: number; // For monthly: 1-4 (first, second, third, fourth week)
    scheduleDay?: number; // 0-6 (Sunday = 0, Monday = 1, ..., Saturday = 6)
    scheduleTime?: string; // HH:MM format (24-hour), e.g., "14:30" for 2:30 PM
  }
  ```

- Storage includes version field for future migrations.

### 6. **Gamification**

- **Streak counter** for completing tasks (per-user).
- Confetti or celebration animation on completion.
- Motivational messages like "Nice job!" or "Keep it going!"
- **Streak logic:** Resets if user misses their turn on a daily/weekly/monthly task.
- Streak badges displayed on task cards and in completion history.

---

## üß† User Stories

| #   | As a... | I want to...          | So that I can...                             |
| --- | ------- | --------------------- | -------------------------------------------- |
| 1   | User    | Create a group        | Organize shared tasks with my friends/family |
| 2   | User    | Add members           | Define who participates in tasks             |
| 3   | User    | Add a new task        | Track who‚Äôs responsible next                 |
| 4   | User    | View who‚Äôs turn it is | Know who should do the task today            |
| 5   | User    | Mark a task as done   | Automatically move turn to the next person   |
| 6   | User    | Get positive feedback | Stay motivated to keep using the app         |

---

## üì± Screens & Components

### 1. **Home Screen**

- **Components:**

  - App title/logo
  - Group list (`GroupCard` with gradient backgrounds)
  - Add group button (FAB)
  - `AddGroupModal` (icon picker, color theme selector)

### 2. **Group Screen**

- **Components:**

  - Header with group icon + name + context menu (edit/delete)
  - Tabs: "Tasks" / "Members"
  - `TaskCardList` (displays schedule information on cards)
  - `AddTaskButton` (FAB)
  - `MemberChipList` (swipe-to-reveal edit/delete actions)
  - `AddMemberButton` (FAB)
  - Streak badges displayed on member chips and task cards

### 3. **Task Details Screen**

- **Components:**

  - Task icon + name
  - Full schedule information display (e.g., "Every Mon at 2:30 PM", "Monthly: First Fri")
  - Current member responsible (with avatar)
  - Completion history (with member avatars and streak badges)
  - Mark done button (disabled when already completed)
  - Skip turn button (hidden when completed)
  - Edit/Delete options (context menu)

### 4. **Add Task Modal**

- Task name input
- Icon picker (Lucide icons)
- Frequency selector (daily/weekly/monthly)
- Scheduling options (conditional based on frequency):
  - **Weekly/Monthly:** Day selector (Sun-Sat)
  - **Monthly:** Week selector (1st-4th week)
  - **All frequencies:** Time picker (optional, native iOS/Android picker)
- Member selector (multi-select or default all)
- Save button

### 5. **Add Member Modal**

- Name input only (avatar color assigned automatically)
- Save button

### 6. **Gamification Layer**

- Confetti animation component
- Motivational message component
- Streak counter component (per-user)

---

## üé® Design Direction

- Inspired by **Duolingo UI**: bright colors, rounded corners, playful illustrations.
- Typography: clean and friendly (e.g., Poppins or Nunito).
- Buttons: large, colorful, with simple icons.
- Animations: light bounce transitions, cheerful feedback on success.

---

## ‚öôÔ∏è Tech Stack

- **Framework:** React Native (Expo)
- **State Management:** Zustand
- **Storage:** AsyncStorage
- **Animations:** react-native-reanimated (for gestures and animations)
- **Navigation:** Expo Router (file-based routing)
- **Icons:** Lucide React Native
- **Gradients:** expo-linear-gradient
- **Time Picker:** @react-native-community/datetimepicker
- **Gestures:** react-native-gesture-handler

---

## üß™ QA & Testing Checklist

- [ ] Can create, edit, and delete groups.
- [ ] Can add, edit, and delete members (swipe actions).
- [ ] Can add, edit, and delete tasks.
- [ ] Task rotation correctly cycles through members.
- [ ] Monthly frequency works correctly.
- [ ] Scheduling options (week, day, time) save and display correctly.
- [ ] Time picker works on iOS and Android (native picker).
- [ ] Tasks can only be completed once per period (daily/weekly/monthly).
- [ ] Schedule information displays correctly on task cards and detail screen.
- [ ] Data persists after app restart.
- [ ] UI looks correct on iOS and Android.
- [ ] Confetti triggers on "Mark Done".
- [ ] Streak counter increases on completion.
- [ ] Streak resets when user misses their turn.

---

## üöÄ Future Versions (Post-v1 Ideas)

- Login and cloud sync (Firebase or Supabase).
- Push notifications for due tasks.
- Custom rotation order.
- Task history and stats.
- Shared links to invite members.
- Themes and advanced gamification (badges, levels, XP system).

---

## üìã MVP Implementation Decisions

### Task Assignment

- Default to **all members** assigned to a task.
- Optional subset selection can be added later if needed.

### Frequency Tracking

- Track minimal completion dates (last completed timestamp per task).
- Use frequency (daily/weekly/monthly) for display and streak calculation.
- Tasks can only be completed once per period (prevents duplicate completions).
- Schedule information (week, day, time) stored for weekly and monthly tasks.

### Gamification

- **Streaks only** (no XP for MVP).
- Per-user streak tracking.
- Streak resets if user misses their turn on a daily/weekly/monthly task.
- Streak badges displayed on task cards and in completion history.

### Data Structure

- Use PRD structure with **versioning** for future migrations.
- Add `lastCompletedAt` timestamp to Task for streak calculation.
- Add `streakCount` and `lastStreakDate` to Member for tracking.
- Add `completionHistory` array to Task for tracking completion history.
- Add `scheduleWeek`, `scheduleDay`, `scheduleTime` to Task for scheduling (weekly/monthly).
- Groups use Lucide icons and color themes (gradient start/end).
- Members use initials-based avatars with random color assignment.
- Tasks use Lucide icons.

### UI Build Priority

1. Home Screen ‚Üí Group List
2. Group Screen ‚Üí Tasks & Members
3. Task Details / Add Modals
4. Gamification Layer (streaks, confetti, messages)
