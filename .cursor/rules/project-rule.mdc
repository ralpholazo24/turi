---
alwaysApply: true
---

# üßæ Product Requirements Document (PRD)

## üì± Product Name

**Turi**

---

## üß≠ Overview

**Turi** is a fun, lightweight app that helps groups (families, roommates, teams) manage **recurring shared tasks** ‚Äî like chores, cooking, or cleaning ‚Äî by showing **whose turn it is** in a friendly interface.

Version 1 (MVP) focuses on **local-only functionality** with **no accounts or cloud sync**, just fast and delightful task rotation.

---

## üéØ Goals

- Simplify managing shared, repetitive tasks.
- Make task tracking fun, visual, and easy to maintain.

---

## üö´ Out of Scope (v1)

- User accounts / authentication.
- Cloud sync or real-time updates.
- Analytics / detailed reporting.

---

## üß© Core Features

### 1. **User & Onboarding**

- **User Identity**: App requires user to provide their name during onboarding
- **User Store**: Stores user with `id`, `name`, and `avatarColor` (randomly assigned)
- **Onboarding Flow**:
  - First-time users see onboarding carousel
  - Then prompted to enter their name
  - Name is required to create groups
  - Onboarding completion status is tracked
- **Group Ownership**: When a group is created, the user is automatically:
  - Added as the first member
  - Set as the group owner (`ownerId` field)

### 2. **Groups**

- Create, view, edit, and delete groups.
- Each group has:

  - Name
  - Icon (Lucide icon)
  - Color preset (name of predefined gradient, e.g., 'Red-Orange')
  - Owner ID (user who created the group)
  - Member list
  - Task list

- **Color System**: Uses `colorPreset` (not `colorStart`/`colorEnd`)
  - 11 predefined color gradient presets available
  - Migration support from old `colorStart`/`colorEnd` format
  - Default: "Red-Light Red" preset
- **Group Reordering**: Groups can be reordered (drag-and-drop)

### 3. **Members**

- Add members by name (initials-based avatar with random color).
- Order defines task rotation sequence.
- Delete or edit member (swipe-to-reveal actions).
- Avatars display member initials with Microsoft Teams-style color palette.

### 4. **Tasks**

- Add tasks within a group.
- Each task has:

  - Task name
  - Icon (Lucide icon)
  - Schedule (required, not optional):
    - `repeat`: Task frequency (see supported frequencies below)
    - `startDate`: ISO date string - when task first becomes due
    - `time`: Optional HH:MM format (24-hour, e.g., "14:30")
    - `dayOfWeek`: Optional 0-6 (Sunday = 0) - Only for 'weekly' and 'biweekly'
  - Assigned members (rotation follows member list)
  - Completion history (tracking who completed when)
  - Skip history (tracking who skipped when)
  - Created timestamp

**Task Frequencies Supported**:

- `daily` - Every day
- `weekdays` - Monday through Friday
- `weekends` - Saturday and Sunday
- `weekly` - Every week on a specific day (requires `dayOfWeek`)
- `biweekly` - Every 2 weeks on a specific day (requires `dayOfWeek`)
- `monthly` - Every month on the same day of month (from `startDate`)
- `every3months` - Every 3 months on the same day
- `every6months` - Every 6 months on the same day
- `yearly` - Every year on the same date

**Scheduling Rules**:

- All tasks require a `startDate` (when task first becomes due)
- Weekly/biweekly tasks automatically set `dayOfWeek` based on `startDate` if not provided
- Time is optional (HH:MM format, 24-hour)
- Default time for notifications: **9:00 AM** (if no time specified)

- "Mark Done" button rotates to the next member.
- Tasks can only be completed once per period (prevents duplicate completions).
- Task cards display schedule information prominently.
- Visual overdue indicators when tasks are past their due period.
- **Undo Completion**: Can undo most recent task completion (restores previous assignment)

### 5. **Rotation Logic**

- Tasks start with the first member in the assigned members list.
- When "Mark Done" is pressed:

  - Assigned index increases by 1.
  - If at the end, wraps to the first member.
  - In solo mode: No rotation (stays with same member)

**Completion Rules**:

- Tasks can only be completed **once per period** (prevents duplicate completions)
- Period determination:
  - `daily`: Same day
  - `weekdays`/`weekends`/`weekly`/`biweekly`: Same ISO week
  - `monthly`/`every3months`/`every6months`: Same month
  - `yearly`: Same year
- When completed: Added to `completionHistory`, activity logged as `task_completed`

**Skip Turn Logic**:

- Moves task to next member without marking as completed
- Skip recorded in `skipHistory`
- Activity logged as `task_skipped`
- Not available in solo mode

**Undo Completion**:

- Reverts most recent completion
- Restores `assignedIndex` to previous member
- Removes completion from `completionHistory`
- Activity logged as `task_undone`
- Reschedules notifications

Example:

```
Members = [Alice, Bob, Charlie]
Task: "Wash Dishes" (assigned to all members)
CurrentTurn = Alice (assignedIndex = 0)
‚Üí Mark Done ‚Üí NextTurn = Bob (assignedIndex = 1)
‚Üí Mark Done ‚Üí NextTurn = Charlie (assignedIndex = 2)
‚Üí Mark Done ‚Üí NextTurn = Alice (assignedIndex = 0)
```

### 6. **Local Storage**

- All data stored using **AsyncStorage** (Expo).
- Data structure:

  ```ts
  AppData {
    version: string; // "1.0.0"
    groups: Group[];
    user?: User; // Current user identity
    onboardingCompleted?: boolean;
  }

  User {
    id: string;
    name: string;
    avatarColor: string; // Color for initials avatar
  }

  Group {
    id: string;
    name: string;
    icon: string; // Lucide icon name
    colorPreset: string; // Color preset name (e.g., 'Red-Orange')
    ownerId: string; // User ID of group creator
    members: Member[];
    tasks: Task[];
    createdAt: string; // ISO date string - when group was created
    activities: GroupActivity[]; // Activity feed for this group
  }

  Member {
    id: string;
    name: string;
    avatarColor: string; // Random color assigned for avatar
  }

  TaskSchedule {
    repeat: 'daily' | 'weekdays' | 'weekends' | 'weekly' | 'biweekly' | 'monthly' | 'every3months' | 'every6months' | 'yearly';
    startDate: string; // ISO date string - when task first becomes due
    time?: string; // HH:MM format (optional)
    dayOfWeek?: number; // 0-6 (Sunday = 0) - Only for 'weekly' and 'biweekly'
  }

  TaskCompletion {
    type: "completed";
    memberId: string;
    timestamp: string; // ISO date string
  }

  TaskSkip {
    type: "skipped";
    memberId: string;
    timestamp: string; // ISO date string
  }

  GroupActivity {
    id: string;
    type: 'task_completed' | 'task_skipped' | 'task_created' | 'task_deleted' | 'task_undone' | 'member_added' | 'member_deleted' | 'group_created';
    timestamp: string; // ISO date string
    actorId?: string; // Member ID who performed the action (optional)
    targetId?: string; // Task ID or Member ID that was affected
    metadata?: {
      type: 'task_completed' | 'task_skipped' | 'task_created' | 'task_deleted' | 'task_undone';
      taskName?: string;
      taskIcon?: string;
    } | {
      type: 'member_added' | 'member_deleted';
      memberName?: string;
    } | {
      type: 'group_created';
    };
  }

  Task {
    id: string;
    name: string;
    icon: string; // Lucide icon name
    assignedIndex: number;
    memberIds: string[];
    completionHistory: TaskCompletion[]; // History of completions
    skipHistory: TaskSkip[]; // History of skips
    schedule: TaskSchedule; // Required, not optional
    createdAt: string; // ISO date string - when task was created
  }
  ```

**Storage Keys**:

- `@turi_app_data` - Main app data (groups, tasks, members)
- `@turi_notification_enabled` - Notification toggle
- `@turi_notification_reminder_minutes` - Reminder time
- `@turi:language` - Language preference
- `@turi_theme_preference` - Theme preference
- `@turi_user` - User data
- `@turi_onboarding_completed` - Onboarding status

**Data Migration**:

- Automatic migration from old format (`colorStart`/`colorEnd` ‚Üí `colorPreset`)
- Migration from old task structure (`frequency` ‚Üí `schedule.repeat`)
- Migration from `lastCompletedAt` ‚Üí `completionHistory`
- Backward compatibility for missing `ownerId`, `avatarColor`, `createdAt`
- Storage includes version field for future migrations.

### 7. **Gamification**

- Confetti or celebration animation on completion.
- Motivational messages like "Nice job!" or "Keep it going!"

### 8. **Solo Mode**

- Automatically enabled when a group has only one member.
- Tasks are automatically assigned to the single member.
- Rotation is disabled (tasks remain assigned to the solo user).
- UI elements adjust:
  - "Whose turn" indicators show "You" instead of member name
  - "Assign to" or member selection is hidden
  - "Skip" button is hidden
  - Solo mode badge appears: "Solo mode ‚Äî all tasks are yours üë§"
- When another member is added, automatically switches to normal rotation mode.

### 9. **Activity Feed**

- Chronological feed of all activities across all groups.
- Activity types tracked:
  - Task completed (who + when)
  - Task skipped (who + when)
  - Task created
  - Task deleted
  - Task undone (who + when) - NEW
  - Member added
  - Member deleted
  - Group created
- Filterable by type (All, Done, Skipped, Created, Members).
- Grouped by relative date (Today, Yesterday, This week, specific dates).
- Shows relative time ("Just now", "2h ago", "3d ago").
- Clickable items navigate to task details or group pages.
- Accessible from Settings ‚Üí Activity.

### 10. **Settings**

- Dark mode toggle (persists across app restarts).
- Activity link (navigates to Activity Feed).
- Notification preferences:
  - Toggle notifications on/off (with permission handling)
  - Reminder time setting (5 min, 10 min, 15 min, 30 min, 1 hour, 2 hours before task)
  - Shows permission status if denied
- Language preferences:
  - Language selector (navigates to Language selection page)
  - Supports multiple languages (currently English and Spanish, more languages added as translations become available)
  - Language preference persists across app restarts
  - Automatically detects device language on first launch
  - Language changes apply immediately without confirmation dialog
- Clear Data:
  - Option to clear all app data (groups, tasks, members, preferences)
  - Clears all AsyncStorage data and scheduled notifications
  - Resets all stores to initial state
  - Includes confirmation modal before clearing
  - Shows success alert and navigates to home after clearing
- Support features:
  - Help & FAQ (navigates to Help page)
  - Contact Support (opens email client)
  - Feature Requests (opens email client)
  - About App (navigates to About page)
- UI:
  - Clean design without border lines between setting items
  - Organized into sections: ACCOUNT, PREFERENCES, SUPPORT, DATA

### 11. **Member Management**

**Member Operations**:

- **Add**: Creates member with random `avatarColor`
- **Edit**: Update member name
- **Delete**:
  - Removes member from group
  - Removes member from all task assignments
  - If task has 0 members after deletion, auto-assigns to first available member
  - Adjusts `assignedIndex` to stay within bounds
  - Reschedules notifications
- **Reorder**: Members can be reordered (drag-and-drop)
  - Task `memberIds` are reordered to match new member order
  - `assignedIndex` is recalculated to preserve current assignment
  - Reschedules notifications

**Task Member Assignment**:

- Tasks can have subset of members assigned (via `memberIds`)
- `reorderTaskMembers`: Reorder assigned members for a specific task
  - Preserves current assignment when reordering
  - Reschedules notifications

**Task Assignment Bounds Checking**:

- `assignedIndex` is always validated to be within bounds of `memberIds.length`
- If member is deleted and `assignedIndex` becomes invalid:
  - If current assigned member was deleted: Reset to index 0
  - Otherwise: Find new index for current member in updated list
- If task has 0 members after deletion: Auto-assign to first available member
- Tasks cannot be created without at least one member assigned

### 12. **Internationalization (i18n)**

- All user-facing text must be translatable
- Translation files stored in `locales/` directory (JSON format)
- Uses i18next and react-i18next for translation management
- Language preference stored in AsyncStorage
- Default language: English
- Supports multiple languages (currently English and Spanish)
- Automatically detects device language on first launch
- Language selector available in Settings ‚Üí App Language
- Language changes apply immediately without confirmation dialog
- Notifications automatically rescheduled with new language when language changes
- ThemedText component supports translation via `i18nKey` prop
- When adding new text to the app, always use translation keys instead of hardcoded strings
- Translation keys follow namespace pattern: `section.item` (e.g., `settings.title`, `task.markDone`)
- New languages can be added by creating new translation files in `locales/` directory

### 13. **Overdue Detection Logic**

**Apple Reminders-style logic**:

**Time-based tasks** (has `schedule.time`):

- Overdue after the scheduled time passes on the due date

**Day-based tasks** (no `schedule.time`):

- Overdue after the day ends (23:59:59)

**Special Cases**:

- Tasks cannot be overdue before their `startDate`
- Newly created tasks are not marked overdue if due date is before creation date
- For completed tasks: Checks if next due date has passed
- For never-completed tasks: Checks if any due date has passed

### 14. **Empty States with Illustrations**

- Empty states display theme-aware SVG illustrations:
  - **No groups:** `chill-girl.svg` illustration on home screen
  - **No tasks:** `cat-and-woman.svg` illustration when group has members but no tasks
  - **No members:** `boy-sipping.svg` illustration when group has no members
- Illustrations adapt to theme (light/dark mode) using `tintColor` prop
- Illustrations displayed at 280x280px with 0.8 opacity for visual consistency
- Empty state messages are translated and use i18n keys

### 15. **Notifications**

- Local notifications scheduled automatically for tasks with due dates/times.
- Notifications sent X minutes before task is due (configurable reminder time).
- Notification content:
  - Title: Task name with bell emoji
  - Body: Assigned member's name + schedule information
  - Includes task and group IDs for navigation
  - Translated based on current language preference
- Smart scheduling:
  - Only schedules for tasks that haven't been completed in the current period
  - Skips tasks with no assigned members
  - Calculates notification date: `dueDate - reminderMinutes`
  - Doesn't schedule notifications in the past
- Notification management:
  - Automatically scheduled when tasks are created (if enabled)
  - Automatically cancelled when tasks are deleted
  - Rescheduled when tasks are completed (for next occurrence)
  - Rescheduled when tasks are updated
  - Rescheduled when member assignments change (skip turn, member deletion, member reorder)
  - Rescheduled when task members are reordered
  - Rescheduled when task completion is undone
  - All notifications rescheduled on app initialization
  - Respects notification toggle preference
- Default behavior:
  - Tasks without scheduled time default to **9:00 AM** for notification purposes
  - Notification calculated as: `dueDate - reminderMinutes`
- **Next Due Date Calculation**:
  - If task was completed: Calculate from completion date (ensures next occurrence)
  - If task not completed: Calculate from now or `startDate` (whichever is later)
  - Special handling for `startDate` being today (shows today as due date if time hasn't passed)
  - For biweekly: Only valid occurrences (even number of weeks from start)
  - For monthly: Handles months with fewer days (e.g., Feb 31 ‚Üí Feb 28/29)
  - For yearly: Handles leap years (Feb 29)
- **Schedule Display Format**:
  - Format: "Repeat Type - Date Text"
  - Examples: "Daily - Today", "Weekly - Monday - Tomorrow", "Monthly - Dec 1, 2025"
  - Date Text: "Today", "Tomorrow", or "Monday, Dec 1, 2025" (Apple Reminders style)
  - Time displayed separately in 12-hour format (e.g., "2:30 PM")
  - Shows overdue indicator when task is past due

---

## üß† User Stories

| #   | As a... | I want to...                  | So that I can...                               |
| --- | ------- | ----------------------------- | ---------------------------------------------- |
| 1   | User    | Create a group                | Organize shared tasks with my friends/family   |
| 2   | User    | Add members                   | Define who participates in tasks               |
| 3   | User    | Add a new task                | Track who's responsible next                   |
| 4   | User    | View who's turn it is         | Know who should do the task today              |
| 5   | User    | Mark a task as done           | Automatically move turn to the next person     |
| 6   | User    | Get positive feedback         | Stay motivated to keep using the app           |
| 7   | User    | View activity feed            | See all completed and skipped tasks            |
| 8   | User    | Use solo mode                 | Manage tasks when I'm the only member          |
| 9   | User    | Adjust app settings           | Customize my experience (dark mode, etc.)      |
| 10  | User    | See overdue tasks             | Know which tasks need attention                |
| 11  | User    | Enable notifications          | Get reminded before tasks are due              |
| 12  | User    | Set reminder time             | Choose how early I want to be notified         |
| 13  | User    | Receive task reminders        | Know when it's my turn even when app is closed |
| 14  | User    | Clear all app data            | Reset the app to a fresh start when needed     |
| 15  | User    | See empty state illustrations | Enjoy visual feedback when there's no content  |

---

## üì± Screens & Components

### 1. **Home Screen**

- **Components:**

  - App title/logo
  - Group list (`GroupCard` with gradient backgrounds)
  - Add group button (FAB)
  - `AddGroupModal` (icon picker, color theme selector)
  - Empty state with `chill-girl.svg` illustration when no groups exist (theme-aware)

### 2. **Group Screen**

- **Components:**

  - Header with group icon + name + context menu (edit/delete)
  - Solo mode badge (when applicable)
  - Tabs: "Tasks" / "Members"
  - `TaskCardList` (displays schedule information on cards, shows illustrations when empty)
    - `cat-and-woman.svg` illustration when members exist but no tasks
    - `boy-sipping.svg` illustration when no members exist
  - `AddTaskButton` (FAB, only shown when group has members)
  - `MemberChipList` (swipe-to-reveal edit/delete actions, shows `boy-sipping.svg` illustration when empty)
  - `AddMemberButton` (FAB on Members tab)

### 3. **Task Details Screen**

- **Components:**

  - Task icon + name (gradient card matching group colors)
  - Full schedule information display (e.g., "Weekly - Monday - Tomorrow", "Monthly - Dec 1, 2025")
  - Overdue indicator when task is past due
  - Current member responsible (with avatar, shows "You" in solo mode)
  - Completion history (with member avatars)
  - Mark done button (disabled when already completed, triggers confetti)
  - Skip button (hidden when completed or in solo mode)
  - Undo completion button (if task was recently completed)
  - Edit/Delete options (context menu)
  - Screen remains open after marking task as done

### 4. **Add Task Modal**

- Task name input
- Icon picker (Lucide icons)
- Repeat frequency selector (daily, weekdays, weekends, weekly, biweekly, monthly, every3months, every6months, yearly)
- Start date picker (when task first becomes due)
- Scheduling options (conditional based on frequency):
  - **Weekly/Biweekly:** Day selector (Sun-Sat) - auto-set from start date
  - **All frequencies:** Time picker (optional, native iOS/Android picker)
- Member selector (multi-select or default all)
- Save button

### 5. **Add Member Modal**

- Name input only (avatar color assigned automatically)
- Save button

### 6. **Settings Screen**

- **Components:**
  - Header with back button
  - ACCOUNT section (Activity link)
  - PREFERENCES section:
    - Notifications link (navigates to notifications page, shows status)
    - Dark Mode toggle
    - App Language link (shows current language, navigates to language selection)
  - SUPPORT section:
    - Feature Requests link
    - Help & FAQ link
    - Contact Support link (opens email client)
    - About App link
  - DATA section:
    - Clear Data link (with confirmation modal)
  - Clean UI without border lines between items

### 7. **Activity Feed Screen**

- **Components:**
  - Header with back button
  - Filter tabs (All, Done, Skipped, Created, Members)
  - Chronological activity list grouped by date
  - Activity items with icons, member avatars, group badges
  - Clickable items navigate to task details or group pages

---

## üé® Design Direction

- Inspired by **Duolingo UI**: bright colors, rounded corners, playful illustrations.
- Typography: clean and friendly (e.g., Poppins or Nunito).
- Buttons: large, colorful, with simple icons.
- Animations: light bounce transitions, cheerful feedback on success.

---

## ‚öôÔ∏è Tech Stack

- **Framework:** React Native (Expo)
- **State Management:** Zustand
- **Storage:** AsyncStorage
- **Theme Management:** Zustand (global theme state)
- **Internationalization:** i18next, react-i18next, expo-localization
- **Animations:** react-native-reanimated (for gestures and animations), react-native-confetti-cannon
- **Navigation:** Expo Router (file-based routing, no bottom tab bar visible)
- **Icons:** Lucide React Native
- **Gradients:** expo-linear-gradient
- **Time Picker:** @react-native-community/datetimepicker
- **Notifications:** expo-notifications
- **Gestures:** react-native-gesture-handler
- **Safe Area:** react-native-safe-area-context
- **Images:** expo-image (for SVG illustrations with theme-aware tinting)

---

## üß™ QA & Testing Checklist

- [ ] Can create, edit, and delete groups.
- [ ] Can add, edit, and delete members (swipe actions).
- [ ] Can add, edit, and delete tasks.
- [ ] Task rotation correctly cycles through members.
- [ ] Monthly frequency works correctly.
- [ ] Scheduling options (week, day, time) save and display correctly.
- [ ] Time picker works on iOS and Android (native picker).
- [ ] Tasks can only be completed once per period (daily/weekly/monthly).
- [ ] Schedule information displays correctly on task cards and detail screen.
- [ ] Data persists after app restart.
- [ ] UI looks correct on iOS and Android.
- [ ] Confetti triggers on "Mark Done".
- [ ] Solo mode works correctly (auto-assignment, UI adjustments).
- [ ] Activity feed shows all activity types correctly.
- [ ] Activity filters work correctly.
- [ ] Overdue indicators display correctly.
- [ ] Dark mode toggle works and persists.
- [ ] FAB buttons respect safe area insets.
- [ ] Skip history is tracked correctly.
- [ ] Activity tracking works for all action types.
- [ ] Notification toggle works and persists preference.
- [ ] Notification permission request works correctly.
- [ ] Reminder time setting works and persists.
- [ ] Notifications are scheduled when tasks are created.
- [ ] Notifications are cancelled when tasks are deleted.
- [ ] Notifications are rescheduled when tasks are completed.
- [ ] Notifications are rescheduled when tasks are updated.
- [ ] Notifications are cancelled when groups are deleted.
- [ ] Notifications are rescheduled when members are deleted.
- [ ] Notifications are rescheduled when turn is skipped.
- [ ] Notifications are rescheduled when task completion is undone.
- [ ] Notifications are rescheduled when members are reordered.
- [ ] Notifications are rescheduled when task members are reordered.
- [ ] Notifications are not sent for completed tasks.
- [ ] Notifications are not sent for tasks with no assigned members.
- [ ] Notifications are not scheduled in the past.
- [ ] Notifications are rescheduled on app initialization.
- [ ] Notification content displays correct member name and schedule.
- [ ] Notification content is translated based on language preference.
- [ ] Default time (9 AM) is used for tasks without scheduled time.
- [ ] Task undo functionality works correctly.
- [ ] Member reordering preserves task assignments correctly.
- [ ] Task member reordering preserves current assignment.
- [ ] Overdue detection works correctly for all frequency types.
- [ ] Schedule display format matches Apple Reminders style.
- [ ] Language preference persists across app restarts.
- [ ] Language selector displays available languages correctly.
- [ ] All user-facing text uses translation keys (no hardcoded strings).
- [ ] Translation keys are properly structured and organized.
- [ ] App detects device language on first launch.
- [ ] Empty state illustrations display correctly and adapt to theme.
- [ ] Clear Data functionality works correctly and clears all data.
- [ ] Language changes apply immediately without confirmation dialog.
- [ ] Settings screen displays without border lines between items.

---

## üöÄ Future Versions (Post-v1 Ideas)

- Login and cloud sync (Firebase or Supabase).
- Push notifications (cloud-based, cross-device sync).
- Custom rotation order.
- Task history and stats.
- Shared links to invite members.
- Themes and advanced gamification (badges, levels, XP system).
- Notification sounds customization.
- Multiple reminder times per task.

---

## üìã MVP Implementation Decisions

### Task Assignment

- Default to **all members** assigned to a task.
- Optional subset selection can be added later if needed.

### Frequency Tracking

- Track completion history via `completionHistory` array (not `lastCompletedAt`).
- Use schedule `repeat` field with 9 frequency options (daily, weekdays, weekends, weekly, biweekly, monthly, every3months, every6months, yearly).
- Tasks can only be completed once per period (prevents duplicate completions).
- Schedule information stored in `TaskSchedule` object:
  - `repeat`: Frequency type
  - `startDate`: When task first becomes due
  - `time`: Optional scheduled time (HH:MM)
  - `dayOfWeek`: Optional day of week (0-6) for weekly/biweekly

### Gamification

- **Simple feedback only** (no streaks for MVP).
- Confetti animation on completion.
- Motivational messages.

### Data Structure

- Use PRD structure with **versioning** for future migrations.
- **Current Structure**:
  - `Task.schedule`: Required `TaskSchedule` object (not optional fields)
  - `Task.completionHistory`: Array of `TaskCompletion` objects (not `lastCompletedAt`)
  - `Task.skipHistory`: Array of `TaskSkip` objects
  - `Task.createdAt`: Timestamp when task was created
  - `Group.colorPreset`: String name of color preset (not `colorStart`/`colorEnd`)
  - `Group.ownerId`: User ID of group creator
  - `Group.createdAt`: Timestamp when group was created
  - `Group.activities`: Array of `GroupActivity` objects
  - `AppData.user`: Optional user identity
  - `AppData.onboardingCompleted`: Boolean flag
- Groups use Lucide icons and color presets (11 predefined gradients).
- Members use initials-based avatars with random color assignment.
- Tasks use Lucide icons.
- Activity tracking includes metadata for task names, icons, and member names.
- Activity type `task_undone` added for undo completion feature.

### UI Build Priority

1. Home Screen ‚Üí Group List
2. Group Screen ‚Üí Tasks & Members
3. Task Details / Add Modals
4. Gamification Layer (confetti, messages)
5. Settings Screen
6. Activity Feed Screen
7. Solo Mode Implementation
8. Notification System (scheduling, preferences, management)
9. UI Polish & Safety (bounds checking, safe area insets, overdue indicators)
10. Empty State Illustrations (theme-aware SVG illustrations)
11. Clear Data Feature
12. Settings UI Refinements (removed border lines, improved organization)

### Notification Implementation

- **Notification Store:** Zustand store for notification preferences (enabled/disabled, reminder minutes).
- **Notification Service:** Utility functions for scheduling, cancelling, and rescheduling notifications.
- **Notification Scheduling Logic:**
  - Calculates next due date based on task frequency and schedule
  - Schedules notification X minutes before due date (configurable)
  - Defaults to 9:00 AM for tasks without scheduled time
  - Skips scheduling if task is already completed for the period
  - Skips scheduling if task has no assigned members
- **Notification Lifecycle:**
  - Created: Scheduled when task is created (if notifications enabled)
  - Updated: Cancelled and rescheduled when task is updated
  - Completed: Cancelled and rescheduled for next occurrence
  - Deleted: Cancelled when task is deleted
  - Group Deleted: All group notifications cancelled
  - Member Deleted: All group notifications rescheduled
  - Skip Turn: Notification rescheduled with new assignee
  - App Init: All notifications rescheduled on app start
- **Notification Preferences:**
  - Stored in AsyncStorage
  - Default reminder time: 15 minutes
  - Reminder time options: 5, 10, 15, 30, 60, 120 minutes
  - Changing reminder time reschedules all notifications
- **Permission Handling:**
  - Requests permission when enabling notifications
  - Shows permission status in settings
  - Gracefully handles permission denial

### Clear Data Implementation

- **Clear Data Utility:** `utils/clear-data.ts` provides `clearAllData()` function
- **Data Cleared:**
  - All AsyncStorage keys (`@turi_app_data`, `@turi_notification_enabled`, `@turi_notification_reminder_minutes`, `@turi:language`, `@turi_theme_preference`, `@turi_user`, `@turi_onboarding_completed`)
  - All scheduled notifications (cancelled)
  - All Zustand stores reset to initial state
  - Language preference cleared (allows device language detection on next launch)
- **User Flow:**
  - User taps "Clear Data" in Settings ‚Üí DATA section
  - Confirmation modal shown with warning message
  - On confirm: All data cleared, success alert shown, navigates to home screen
  - On cancel: Modal dismissed, no changes made
- **Error Handling:**
  - Errors logged to console
  - Error alert shown to user if clearing fails

### Notification Implementation Details

- **Notification Store:** Zustand store for notification preferences (enabled/disabled, reminder minutes).
- **Notification Service:** Utility functions for scheduling, cancelling, and rescheduling notifications.
- **Notification Scheduling Logic:**
  - Calculates next due date based on task schedule
  - Schedules notification X minutes before due date (configurable)
  - Defaults to 9:00 AM for tasks without scheduled time
  - Skips scheduling if task is already completed for the period
  - Skips scheduling if task has no assigned members
  - Checks if notification date would be in the past (skips if so)
- **Notification Lifecycle:**
  - Created: Scheduled when task is created (if notifications enabled)
  - Updated: Cancelled and rescheduled when task is updated
  - Completed: Cancelled and rescheduled for next occurrence
  - Deleted: Cancelled when task is deleted
  - Group Deleted: All group notifications cancelled
  - Member Deleted: All group notifications rescheduled
  - Member Reordered: All group notifications rescheduled
  - Task Member Reordered: Notification rescheduled for that task
  - Skip Turn: Notification rescheduled with new assignee
  - Undo Completion: Notification rescheduled
  - App Init: All notifications rescheduled on app start
- **Notification Preferences:**
  - Stored in AsyncStorage
  - Default reminder time: 15 minutes
  - Reminder time options: 5, 10, 15, 30, 60, 120 minutes
  - Changing reminder time reschedules all notifications
- **Permission Handling:**
  - Requests permission when enabling notifications
  - Shows permission status in settings
  - Gracefully handles permission denial
